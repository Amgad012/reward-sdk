"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const w=require("react");var lt={exports:{}},Ee={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft;function mt(){if(ft)return Ee;ft=1;var c=w,y=Symbol.for("react.element"),P=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,K=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};function Q(j,S,q){var m,C={},A=null,Z=null;q!==void 0&&(A=""+q),S.key!==void 0&&(A=""+S.key),S.ref!==void 0&&(Z=S.ref);for(m in S)u.call(S,m)&&!Y.hasOwnProperty(m)&&(C[m]=S[m]);if(j&&j.defaultProps)for(m in S=j.defaultProps,S)C[m]===void 0&&(C[m]=S[m]);return{$$typeof:y,type:j,key:A,ref:Z,props:C,_owner:K.current}}return Ee.Fragment=P,Ee.jsx=Q,Ee.jsxs=Q,Ee}var _e={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt;function wt(){return pt||(pt=1,process.env.NODE_ENV!=="production"&&function(){var c=w,y=Symbol.for("react.element"),P=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),j=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),s=Symbol.iterator,_="@@iterator";function N(e){if(e===null||typeof e!="object")return null;var r=s&&e[s]||e[_];return typeof r=="function"?r:null}var L=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function O(e){{for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];ee("error",e,a)}}function ee(e,r,a){{var i=L.ReactDebugCurrentFrame,h=i.getStackAddendum();h!==""&&(r+="%s",a=a.concat([h]));var b=a.map(function(x){return String(x)});b.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,b)}}var Oe=!1,te=!1,ye=!1,Le=!1,Ie=!1,Pe;Pe=Symbol.for("react.module.reference");function Ae(e){return!!(typeof e=="string"||typeof e=="function"||e===u||e===Y||Ie||e===K||e===q||e===m||Le||e===Z||Oe||te||ye||typeof e=="object"&&e!==null&&(e.$$typeof===A||e.$$typeof===C||e.$$typeof===Q||e.$$typeof===j||e.$$typeof===S||e.$$typeof===Pe||e.getModuleId!==void 0))}function Ke(e,r,a){var i=e.displayName;if(i)return i;var h=r.displayName||r.name||"";return h!==""?a+"("+h+")":a}function ve(e){return e.displayName||"Context"}function V(e){if(e==null)return null;if(typeof e.tag=="number"&&O("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case u:return"Fragment";case P:return"Portal";case Y:return"Profiler";case K:return"StrictMode";case q:return"Suspense";case m:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j:var r=e;return ve(r)+".Consumer";case Q:var a=e;return ve(a._context)+".Provider";case S:return Ke(e,e.render,"ForwardRef");case C:var i=e.displayName||null;return i!==null?i:V(e.type)||"Memo";case A:{var h=e,b=h._payload,x=h._init;try{return V(x(b))}catch{return null}}}return null}var M=Object.assign,G=0,ue,Qe,re,$e,be,We,De;function Fe(){}Fe.__reactDisabledLog=!0;function me(){{if(G===0){ue=console.log,Qe=console.info,re=console.warn,$e=console.error,be=console.group,We=console.groupCollapsed,De=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Fe,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}G++}}function dt(){{if(G--,G===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:M({},e,{value:ue}),info:M({},e,{value:Qe}),warn:M({},e,{value:re}),error:M({},e,{value:$e}),group:M({},e,{value:be}),groupCollapsed:M({},e,{value:We}),groupEnd:M({},e,{value:De})})}G<0&&O("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var we=L.ReactCurrentDispatcher,H;function d(e,r,a){{if(H===void 0)try{throw Error()}catch(h){var i=h.stack.trim().match(/\n( *(at )?)/);H=i&&i[1]||""}return`
`+H+e}}var Me=!1,fe;{var Ze=typeof WeakMap=="function"?WeakMap:Map;fe=new Ze}function ze(e,r){if(!e||Me)return"";{var a=fe.get(e);if(a!==void 0)return a}var i;Me=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var b;b=we.current,we.current=null,me();try{if(r){var x=function(){throw Error()};if(Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(F){i=F}Reflect.construct(e,[],x)}else{try{x.call()}catch(F){i=F}e.call(x.prototype)}}else{try{throw Error()}catch(F){i=F}e()}}catch(F){if(F&&i&&typeof F.stack=="string"){for(var f=F.stack.split(`
`),W=i.stack.split(`
`),k=f.length-1,E=W.length-1;k>=1&&E>=0&&f[k]!==W[E];)E--;for(;k>=1&&E>=0;k--,E--)if(f[k]!==W[E]){if(k!==1||E!==1)do if(k--,E--,E<0||f[k]!==W[E]){var B=`
`+f[k].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),typeof e=="function"&&fe.set(e,B),B}while(k>=1&&E>=0);break}}}finally{Me=!1,we.current=b,dt(),Error.prepareStackTrace=h}var he=e?e.displayName||e.name:"",de=he?d(he):"";return typeof e=="function"&&fe.set(e,de),de}function et(e,r,a){return ze(e,!1)}function Ye(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function pe(e,r,a){if(e==null)return"";if(typeof e=="function")return ze(e,Ye(e));if(typeof e=="string")return d(e);switch(e){case q:return d("Suspense");case m:return d("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case S:return et(e.render);case C:return pe(e.type,r,a);case A:{var i=e,h=i._payload,b=i._init;try{return pe(b(h),r,a)}catch{}}}return""}var oe=Object.prototype.hasOwnProperty,ie={},Ue=L.ReactDebugCurrentFrame;function D(e){if(e){var r=e._owner,a=pe(e.type,e._source,r?r.type:null);Ue.setExtraStackFrame(a)}else Ue.setExtraStackFrame(null)}function tt(e,r,a,i,h){{var b=Function.call.bind(oe);for(var x in e)if(b(e,x)){var f=void 0;try{if(typeof e[x]!="function"){var W=Error((i||"React class")+": "+a+" type `"+x+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[x]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw W.name="Invariant Violation",W}f=e[x](r,x,i,a,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(k){f=k}f&&!(f instanceof Error)&&(D(h),O("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",i||"React class",a,x,typeof f),D(null)),f instanceof Error&&!(f.message in ie)&&(ie[f.message]=!0,D(h),O("Failed %s type: %s",a,f.message),D(null))}}}var rt=Array.isArray;function Se(e){return rt(e)}function Be(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,a=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return a}}function Te(e){try{return Ne(e),!1}catch{return!0}}function Ne(e){return""+e}function ke(e){if(Te(e))return O("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Be(e)),Ne(e)}var ge=L.ReactCurrentOwner,nt={key:!0,ref:!0,__self:!0,__source:!0},Ve,He;function Je(e){if(oe.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function t(e){if(oe.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function o(e,r){typeof e.ref=="string"&&ge.current}function l(e,r){{var a=function(){Ve||(Ve=!0,O("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};a.isReactWarning=!0,Object.defineProperty(e,"key",{get:a,configurable:!0})}}function p(e,r){{var a=function(){He||(He=!0,O("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};a.isReactWarning=!0,Object.defineProperty(e,"ref",{get:a,configurable:!0})}}var R=function(e,r,a,i,h,b,x){var f={$$typeof:y,type:e,key:r,ref:a,props:x,_owner:b};return f._store={},Object.defineProperty(f._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(f,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(f,"_source",{configurable:!1,enumerable:!1,writable:!1,value:h}),Object.freeze&&(Object.freeze(f.props),Object.freeze(f)),f};function T(e,r,a,i,h){{var b,x={},f=null,W=null;a!==void 0&&(ke(a),f=""+a),t(r)&&(ke(r.key),f=""+r.key),Je(r)&&(W=r.ref,o(r,h));for(b in r)oe.call(r,b)&&!nt.hasOwnProperty(b)&&(x[b]=r[b]);if(e&&e.defaultProps){var k=e.defaultProps;for(b in k)x[b]===void 0&&(x[b]=k[b])}if(f||W){var E=typeof e=="function"?e.displayName||e.name||"Unknown":e;f&&l(x,E),W&&p(x,E)}return R(e,f,W,h,i,ge.current,x)}}var g=L.ReactCurrentOwner,z=L.ReactDebugCurrentFrame;function $(e){if(e){var r=e._owner,a=pe(e.type,e._source,r?r.type:null);z.setExtraStackFrame(a)}else z.setExtraStackFrame(null)}var ne;ne=!1;function se(e){return typeof e=="object"&&e!==null&&e.$$typeof===y}function X(){{if(g.current){var e=V(g.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function ae(e){return""}var J={};function le(e){{var r=X();if(!r){var a=typeof e=="string"?e:e.displayName||e.name;a&&(r=`

Check the top-level render call using <`+a+">.")}return r}}function U(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var a=le(r);if(J[a])return;J[a]=!0;var i="";e&&e._owner&&e._owner!==g.current&&(i=" It was passed a child from "+V(e._owner.type)+"."),$(e),O('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',a,i),$(null)}}function je(e,r){{if(typeof e!="object")return;if(Se(e))for(var a=0;a<e.length;a++){var i=e[a];se(i)&&U(i,r)}else if(se(e))e._store&&(e._store.validated=!0);else if(e){var h=N(e);if(typeof h=="function"&&h!==e.entries)for(var b=h.call(e),x;!(x=b.next()).done;)se(x.value)&&U(x.value,r)}}}function qe(e){{var r=e.type;if(r==null||typeof r=="string")return;var a;if(typeof r=="function")a=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===S||r.$$typeof===C))a=r.propTypes;else return;if(a){var i=V(r);tt(a,e.props,"prop",i,e)}else if(r.PropTypes!==void 0&&!ne){ne=!0;var h=V(r);O("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",h||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&O("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ge(e){{for(var r=Object.keys(e.props),a=0;a<r.length;a++){var i=r[a];if(i!=="children"&&i!=="key"){$(e),O("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",i),$(null);break}}e.ref!==null&&($(e),O("Invalid attribute `ref` supplied to `React.Fragment`."),$(null))}}var Ce={};function Re(e,r,a,i,h,b){{var x=Ae(e);if(!x){var f="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(f+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var W=ae();W?f+=W:f+=X();var k;e===null?k="null":Se(e)?k="array":e!==void 0&&e.$$typeof===y?(k="<"+(V(e.type)||"Unknown")+" />",f=" Did you accidentally export a JSX literal instead of a component?"):k=typeof e,O("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",k,f)}var E=T(e,r,a,h,b);if(E==null)return E;if(x){var B=r.children;if(B!==void 0)if(i)if(Se(B)){for(var he=0;he<B.length;he++)je(B[he],e);Object.freeze&&Object.freeze(B)}else O("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else je(B,e)}if(oe.call(r,"key")){var de=V(e),F=Object.keys(r).filter(function(bt){return bt!=="key"}),at=F.length>0?"{key: someKey, "+F.join(": ..., ")+": ...}":"{key: someKey}";if(!Ce[de+at]){var vt=F.length>0?"{"+F.join(": ..., ")+": ...}":"{}";O(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,at,de,vt,de),Ce[de+at]=!0}}return e===u?Ge(E):qe(E),E}}function Xe(e,r,a){return Re(e,r,a,!0)}function v(e,r,a){return Re(e,r,a,!1)}var I=v,xe=Xe;_e.Fragment=u,_e.jsx=I,_e.jsxs=xe}()),_e}process.env.NODE_ENV==="production"?lt.exports=mt():lt.exports=wt();var n=lt.exports;const St=({width:c=18,height:y=18})=>n.jsx("svg",{width:c,height:y,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{d:"M12 7V14M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Tt=({width:c=14,height:y=14})=>n.jsx("svg",{width:c,height:y,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{d:"M9 6L15 12L9 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),kt=({width:c=15,height:y=15})=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:c,height:y,fill:"currentColor",children:n.jsx("path",{d:"M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"})}),jt=({width:c=16,height:y=16})=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:c,height:y,fill:"currentColor",children:n.jsx("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})}),gt=({width:c=12,height:y=12})=>n.jsx("svg",{width:c,height:y,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{d:"M5 13L9 17L19 7",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),Ct=({showPreferences:c,skipPreferences:y,topicsDict:P,colors:u,formatTopicName:K,prefSubmitStatus:Y,updateProfile:Q})=>{const[j,S]=w.useState({});w.useEffect(()=>{c&&S({...P})},[c,P]);const q=s=>{S(_=>({..._,[s]:!_[s]}))},m=()=>{const _=!Object.values(j).every(L=>L===!0),N={};Object.keys(j).forEach(L=>{N[L]=_}),S(N)},C=Object.values(j).every(s=>s===!0),A=()=>{const s=Object.keys(j).filter(ee=>j[ee]),_=Object.keys(P).filter(ee=>P[ee]);let N=!1;s.length!==_.length?N=!0:N=s.some(ee=>!_.includes(ee));const L=s.length===0,O=Object.keys(j).length;Q({tempTopicsDict:j,allTopicsSelected:C,newSelectedTopics:s,oldSelectedTopics:_,noTopicsSelected:L,hasChanges:N,totalTopicsCount:O})},Z=s=>{s.target===s.currentTarget&&y()};return c?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Z,children:n.jsxs("div",{style:{backgroundColor:u.containerBg,borderRadius:"8px",width:"95%",maxWidth:"600px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",animation:"fadeInUp 0.3s",overflow:"hidden",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{padding:`${window.innerWidth<480?"24px 16px":"32px"} ${window.innerWidth<480?"16px":"32px"} 0`,overflow:"auto",flexGrow:1,maxHeight:window.innerWidth<480?"calc(90vh - 100px)":"calc(80vh - 100px)"},children:[n.jsx("style",{children:`
            @keyframes fadeInUp {
              from { opacity: 0; transform: translateY(20px); }
              to { opacity: 1; transform: translateY(0); }
            }
          `}),n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0px"},children:n.jsx("h2",{style:{margin:0,color:u.text,fontSize:window.innerWidth<480?"20px":"26px",userSelect:"none",cursor:"default"},children:"Your interests"})}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"46px"},children:[n.jsx("p",{style:{color:u.textLight,margin:0,fontSize:"18px",userSelect:"none",cursor:"default"},children:"Select topics you're interested in"}),n.jsxs("div",{onClick:m,style:{padding:"8px 12px",borderRadius:"8px",border:`1px solid ${C?u.primary:u.border}`,backgroundColor:C?u.primaryLight:"white",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",height:"36px",boxSizing:"border-box",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",width:"140px",marginLeft:"auto",justifyContent:"flex-start",overflow:"hidden"},children:[n.jsxs("div",{style:{width:"16px",height:"16px",minWidth:"16px",borderRadius:"4px",border:`2px solid ${C?u.primary:u.secondary}`,backgroundColor:C?u.primary:"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"all 0.2s ease",position:"relative",left:"0"},children:["                ",C&&n.jsx(gt,{width:10,height:10})]}),n.jsx("span",{style:{color:C?u.primary:u.text,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",flex:"0 1 auto"},children:C?"Unselect all":"Select all"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<480?"repeat(auto-fill, minmax(130px, 1fr))":"repeat(auto-fill, minmax(180px, 1fr))",gap:window.innerWidth<480?"8px":"16px",paddingBottom:"80px"},children:Object.entries(j).map(([s,_])=>n.jsxs("div",{onClick:()=>q(s),style:{padding:"12px 16px",borderRadius:"8px",border:`1px solid ${_?u.primary:u.border}`,backgroundColor:_?u.primaryLight:"white",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",height:"46px",boxSizing:"border-box",userSelect:"none"},children:[n.jsxs("div",{style:{width:"18px",height:"18px",minWidth:"18px",borderRadius:"4px",border:`2px solid ${_?u.primary:u.secondary}`,backgroundColor:_?u.primary:"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"all 0.2s ease"},children:["                  ",_&&n.jsx(gt,{})]}),n.jsx("span",{style:{color:_?u.primary:u.text,fontWeight:_?"500":"normal",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:"1",userSelect:"none"},children:K(s)})]},s))}),Y&&n.jsx("div",{style:{marginTop:"24px",marginBottom:"24px",padding:"12px 16px",borderRadius:"8px",backgroundColor:Y.type==="success"?u.successLight:u.errorLight,color:Y.type==="success"?u.success:u.error,animation:"fadeIn 0.3s"},children:Y.message})]}),n.jsxs("div",{style:{padding:(window.innerWidth<480,"8px 24px 8px 0px"),marginTop:"auto",display:"flex",justifyContent:"flex-end",gap:"16px",borderTop:`1px solid ${u.border}`,backgroundColor:`${u.containerBg}ee`,boxShadow:"0 -4px 6px rgba(255, 179, 179, 0.03)",position:"relative"},children:[n.jsx("button",{onClick:y,style:{padding:"10px 24px",backgroundColor:"white",color:u.text,border:`1px solid ${u.border}`,borderRadius:"8px",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease",userSelect:"none"},onMouseOver:s=>{s.currentTarget.style.backgroundColor=u.secondary+"15",s.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.1)",s.currentTarget.style.border=`1px solid ${u.secondary}`},onMouseOut:s=>{s.currentTarget.style.backgroundColor="white",s.currentTarget.style.boxShadow="none",s.currentTarget.style.border=`1px solid ${u.border}`},children:"Skip"}),n.jsx("button",{onClick:A,style:{padding:"10px 24px",backgroundColor:u.primary,color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease",userSelect:"none"},onMouseOver:s=>{s.currentTarget.style.backgroundColor="#2563eb",s.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.4)"},onMouseOut:s=>{s.currentTarget.style.backgroundColor=u.primary,s.currentTarget.style.boxShadow="none"},children:"Save"})]})]})}):null},ct="rewardSdk_sessionId",yt="rewardSdk_languages";let ce=null,ot=!1,it=[];if(typeof window<"u"){const c=localStorage.getItem(ct);c&&(ce=c)}const xt=()=>{let c=[];if(navigator.languages&&navigator.languages.length){const y=new Set;c=navigator.languages.map(P=>P.split("-")[0]).filter(P=>y.has(P)?!1:(y.add(P),!0))}else c=[navigator.language.split("-")[0]];return c},ht=()=>{try{const c=localStorage.getItem(yt);return c?JSON.parse(c):[]}catch(c){return console.error("Error parsing stored languages:",c),[]}},st=c=>{try{localStorage.setItem(yt,JSON.stringify(c))}catch(y){console.error("Error storing languages:",y)}},Rt=(c=null)=>(c?(ce=c,localStorage.setItem(ct,c)):(ce=null,localStorage.removeItem(ct)),!0),Et=()=>!!ce,ut=({apiKey:c="89b668d3f2af4e2ea9e0e44d74620b44",apiBaseUrl:y="https://label-api.fly.dev/",taskCount:P="3",customStyle:u={},onRewardGranted:K,onClose:Y})=>{if(!c)throw new Error("RewardSdk: apiKey is required but not provided in props or environment variables");if(!y)throw new Error("API base URL is not configured in props or environment variables");const Q=async()=>{if(A(!0),Et())await pe()||D();else{const t=Ye();ie(t)}},[j,S]=w.useState(null),[q,m]=w.useState(!1),[C,A]=w.useState(!0),[Z,s]=w.useState(null),[_,N]=w.useState({}),[L,O]=w.useState(P),[ee,Oe]=w.useState(!0),[te,ye]=w.useState(!1),[Le,Ie]=w.useState(""),[Pe,Ae]=w.useState(0),[Ke,ve]=w.useState(0),[V,M]=w.useState(!1),[G,ue]=w.useState({}),[Qe,re]=w.useState(!1),[$e,be]=w.useState(null),[We,De]=w.useState(!1),Fe=["profile","user","task","name"][Math.floor(Math.random()*4)],[me]=w.useState(`${Fe}_${Math.random().toString(36).substring(2,7)}`),[dt,we]=w.useState(window.innerWidth),H=async(t,o="GET",l=null,p={})=>{const R={requiresSession:!0,onRedirect:ie,setLoading:!0},{requiresSession:T,onRedirect:g,setLoading:z}={...R,...p};try{z&&m(!0),s(null);const $=`${y}${t}`,ne={Accept:"application/json","Content-Type":"application/json"};T&&ce&&(ne["X-Session-ID"]=ce),c&&(ne["X-API-KEY"]=c);const se={method:o,headers:ne};l&&(o==="POST"||o==="PUT")&&(se.body=JSON.stringify(l));const X=await fetch($,se);if(X.status===307){if(z&&m(!1),ot)return new Promise((J,le)=>{it.push({endpoint:t,method:o,body:l,options:p,resolve:J,reject:le})});ot=!0;try{const J=g?await g():null,le=it.map(U=>H(U.endpoint,U.method,U.body,U.options).then(U.resolve,U.reject));return it=[],await Promise.allSettled(le),J||H(t,o,l,p)}finally{ot=!1}}let ae;try{ae=await X.json()}catch{ae={detail:`API responded with status: ${X.status}`}}if(!X.ok)throw new Error(ae.detail||ae.error||`API responded with status: ${X.status}`);return ae}catch($){throw s($.message||"Failed to connect to API. Is the server running?"),$}finally{z&&m(!1)}},d={background:"#f8fafc",containerBg:"#ffffff",primary:"#3b82f6",primaryLight:"#dbeafe",secondary:"#64748b",secondaryLight:"#f1f5f9",secondaryV:"#f0f9ff",success:"#10b981",successLight:"#d1fae5",error:"#ef4444",errorLight:"#fee2e2",text:"#334155",textLight:"#64748b",border:"#e2e8f0",warning:"#f59e0b",warningLight:"#fef3c7"},fe={...{backgroundColor:"transparent",borderRadius:"8px",color:d.text,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',Width:"100%",overflowY:"auto",Height:"100%",userSelect:"none"},...u},Ze=()=>{if(!document.getElementById("reward-sdk-responsive-styles")){const t=document.createElement("style");t.id="reward-sdk-responsive-styles",t.innerHTML=`
        @media screen and (max-width: 767px) {
          .reward-sdk-container .task-container {
            flex-direction: column !important;
          }
          .reward-sdk-container .task-left-half {
            width: 100% !important;
          }
          .reward-sdk-container .task-right-half {
            width: 100% !important;
            padding: 16px !important;
            margin: 0 !important;
          }
        }
      `,document.head.appendChild(t)}},ze=()=>{Ie("Only correct answers count"),Ae(t=>t+1)},et=()=>{Ie(""),O(t=>Math.max(0,t-1))},Ye=()=>{const t=xt();return st(t),t},pe=async()=>{const t=ht(),o=xt();if(o.length!==t.length)return st(o),await ie(o),!0;for(let l=0;l<o.length;l++)if(o[l]!==t[l])return st(o),await ie(o),!0;return!1},oe=()=>{const t=Ye();ie(t)};w.useEffect(()=>{window.addEventListener("languagechange",oe);const t=()=>{we(window.innerWidth)};return window.addEventListener("resize",t),Ze(),Q(),()=>{window.removeEventListener("languagechange",oe),window.removeEventListener("resize",t)}},[]);const ie=async(t=null)=>{try{m(!0),s(null);const l={langs:t||ht()},p=`${y}identity/`,R={Accept:"application/json","Content-Type":"application/json"};c&&(R["X-API-KEY"]=c),ce&&(R["X-Session-ID"]=ce);const T=await fetch(p,{method:"POST",headers:R,body:JSON.stringify(l)});let g;try{g=await T.json()}catch{g={detail:`API responded with status: ${T.status}`}}if(!T.ok)throw new Error(g.detail||g.error||`API responded with status: ${T.status}`);return g.session_id&&g.api_topics&&g.message==="new_user"?(Rt(g.session_id),ge(g.api_topics,null),De(!0),m(!1),A(!1),M(!0),g):g.message==="language_updated"?(setTimeout(()=>D(),0),g):(s("Unexpected response from identity endpoint"),m(!1),A(!1),null)}catch(o){return s(o.message||"Failed to connect to identity endpoint"),m(!1),A(!1),null}},Ue=t=>{var R,T,g;if(!Array.isArray(t)||t.length===0)return!1;const o=t[0],l=(T=(R=o==null?void 0:o.content)==null?void 0:R.image)==null?void 0:T.url,p=(g=o==null?void 0:o.task)==null?void 0:g.text;return!!(l&&p)},D=async(t=!1)=>{try{A(!1),ye(!1);let o="task/";t&&Math.random()<.5&&(o+="?complexity=1");const l=await H(o,"GET");if(!Ue(l)){s("Failed to get a task. Please try again.");return}S(l),N({}),ee&&t&&Oe(!1)}catch{}},tt=()=>{D(!0)},rt=async(t,o,l)=>{if(!te)try{ye(!0);const p={task_id:t,track_id:l,solution:o},R=L===1;R?(p.wrong_answers=Pe,p.total_tasks=Ke):m(!0);const T=document.getElementById(me);T&&T.value&&(p.callEndPoint=T.value);const g=await H("solution/","POST",p);ve($=>$+1);const z=R&&(g==null?void 0:g.result)==="correct";if(g&&g.result==="wrong"){ze(),D(!0);return}else g&&g.result==="correct"&&et();Oe(!1),z?(Ae(0),ve(0),alert("Reward granted ðŸŽ"),K&&K()):D()}catch(p){N(R=>({...R,[t]:{status:"error",message:`Error: ${p.message}`}})),ye(!1)}},Se=async()=>{try{return re(!0),(await H("topics/","GET",null,{requiresSession:!1,setLoading:!1})).api_topics||[]}catch{return[]}finally{re(!1)}},Be=async()=>{try{return(await H("profile/","GET",null,{setLoading:!1})).user_topics||[]}catch{return[]}},Te=async(t=[])=>{re(!0),be(null);try{if((await H("profile/update/","POST",{topics:t},{setLoading:!1})).message==="profile_updated")M(!1),D();else throw new Error("Unexpected response from profile update")}catch(o){be({type:"error",message:`Failed to save preferences: ${o.message}`})}finally{re(!1)}},Ne=t=>{const{tempTopicsDict:o,allTopicsSelected:l,newSelectedTopics:p,oldSelectedTopics:R,noTopicsSelected:T,hasChanges:g,totalTopicsCount:z}=t;if(!g){ke();return}ue(o),!l&&!T?Te(p):l&&R.length===0||T&&R.length===z?(M(!1),D()):Te(l?[]:p)},ke=()=>{M(!1),D()},ge=(t,o)=>{if(t!=null&&o!==void 0&&o!==null){const l={};return t.forEach(p=>{l[p]=o.includes(p)}),ue(l),l}else if(t!=null&&t.length>0){const l={};return t.forEach(p=>{l[p]=!1}),ue(l),l}else if(o!=null){const l={...G};return Object.keys(l).forEach(p=>{l[p]=!1}),Array.isArray(o)&&o.forEach(p=>{p in l&&(l[p]=!0)}),ue(l),l}return G},nt=async()=>{if(Object.keys(G).length===0)try{const t=await Se(),o=await Be();return ge(t,o),!0}catch(t){return s(`Failed to update topics: ${t.message}`),!1}if(We)try{const t=await Be();ge(null,t)}catch(t){return s(`Failed to update topics for new user: ${t.message}`),!1}return!0},Ve=async()=>{re(!0);try{await nt()&&M(!0)}catch(t){s(`Failed to prepare preferences: ${t.message}`)}finally{re(!1)}},He=t=>t.toLowerCase()==="uae"?"UAE":t.charAt(0).toUpperCase()+t.slice(1).replace(/-/g," "),Je=(t,o=!1)=>{var J,le,U,je,qe,Ge,Ce,Re,Xe;if(!t&&!o||!o&&(!t.id||!((le=(J=t.content)==null?void 0:J.image)!=null&&le.url)||!((U=t.task)!=null&&U.text)))return null;const l=v=>!v||typeof v!="string"?"":v.charAt(0).toUpperCase()+v.slice(1),p={border:"#cbd5e1",image:"#94a3b8"},R={backgroundColor:"transparent",marginBottom:"20px",transition:"all 0.3s ease",display:"flex",flexDirection:"row",width:"100%",opacity:o?"0.85":"1",position:"relative",boxSizing:"border-box"},T=640,g=480,z=T/g,$={width:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",boxSizing:"border-box","@media (max-width: 768px)":{paddingRight:"0px"}},ne={width:"50%",display:"flex",flexDirection:"column",padding:"16px",margin:"0",borderRadius:"8px",boxSizing:"border-box",justifyContent:"space-between","@media (max-width: 768px)":{alignSelf:"center",width:"100%"}},se={width:"100%",height:"auto",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",backgroundColor:(o||(qe=(je=t==null?void 0:t.content)==null?void 0:je.image)!=null&&qe.url,"transparent"),borderRadius:"8px",boxSizing:"border-box",aspectRatio:`${z}`},X={fontSize:"20px",fontWeight:"600",margin:"0 0 16px",padding:"16px",backgroundColor:o?p.image:"transparent",borderRadius:"8px",lineHeight:"1.4",color:o?"transparent":d.text,letterSpacing:"0.01em",animation:o?"pulse 1.5s infinite ease-in-out":"none",minHeight:"80px",height:o?"80px":"auto"},ae={padding:"10px 20px",backgroundColor:d.secondaryLight,color:d.secondary,borderRadius:"30px",cursor:"pointer",border:`1px solid ${d.border}`,fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"auto",marginBottom:"0",marginLeft:"auto",width:"auto",minWidth:"80px",userSelect:"none"};return n.jsxs("div",{style:R,className:"task-container",children:[n.jsx("div",{style:$,className:"task-left-half",children:n.jsxs("div",{style:se,children:[!o&&((Ce=(Ge=t.content)==null?void 0:Ge.image)==null?void 0:Ce.url)&&n.jsx("img",{src:t.content.image.url,alt:t.content.image.filename||"Task image",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.08)"}}),o&&n.jsx("div",{style:{width:"100%",height:"100%",aspectRatio:`${T} / ${g}`,backgroundColor:p.image,borderRadius:"8px",animation:"pulse 1.5s infinite ease-in-out"}})]})}),n.jsxs("div",{style:ne,className:"task-right-half",children:[n.jsxs("div",{className:"right-side-top",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsx("div",{style:{flex:1},children:Le&&n.jsxs("div",{style:{backgroundColor:d.warningLight,color:d.warning,padding:"5px 20px",borderRadius:"30px",fontWeight:"500",fontSize:"16px",display:"flex",alignItems:"center",gap:"6px",border:`1px solid ${d.warning}30`,animation:"fadeIn 0.5s",maxWidth:"fit-content"},children:[n.jsx(St,{}),Le]})}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:L>0&&Array.isArray(j)&&n.jsxs("div",{style:{backgroundColor:d.secondaryLight,color:d.secondary,padding:"5px 15px",borderRadius:"30px",fontWeight:"500",fontSize:"16px",display:"flex",alignItems:"center",gap:"2px",border:`1px solid ${d.border}`,position:"relative",cursor:"pointer",transition:"all 0.3s ease",marginLeft:"auto",userSelect:"none"},onMouseEnter:v=>{const I=v.currentTarget.querySelector(".tasks-tooltip");I&&(I.style.visibility="visible",I.style.opacity="1")},onMouseLeave:v=>{const I=v.currentTarget.querySelector(".tasks-tooltip");I&&(I.style.visibility="hidden",I.style.opacity="0")},children:[n.jsx("span",{style:{backgroundColor:d.primary,width:"10px",height:"10px",borderRadius:"50%",display:"inline-block",marginRight:"8px"}}),n.jsx("span",{children:L}),n.jsxs("div",{className:"tasks-tooltip",style:{visibility:"hidden",opacity:0,position:"absolute",bottom:"calc(100% + 10px)",left:"50%",transform:"translateX(-50%)",backgroundColor:d.text,color:"white",padding:"6px 12px",borderRadius:"6px",fontSize:"14px",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 8px rgba(0,0,0,0.15)",transition:"all 0.3s ease"},children:[L===1?"Task":"Tasks"," Remaining",n.jsx("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:`6px solid ${d.text}`}})]})]})})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",flex:"1",minHeight:"250px"},children:[n.jsx("div",{style:{...X,marginTop:"20px"},children:o?"":l(((Re=t.task)==null?void 0:Re.text)||"")}),n.jsxs("div",{style:{marginTop:"20px",marginBottom:"20px",display:"flex",flexWrap:"wrap",gap:"20px",justifyContent:"center"},children:[!o&&n.jsx("input",{type:"text",name:me,id:me,style:{position:"absolute",left:"-9999px",opacity:0,height:"0",width:"0",overflow:"hidden",display:"none",visibility:"hidden",pointerEvents:"none"},"aria-hidden":"true",tabIndex:"-1"}),o?Array.from({length:4}).map((v,I)=>n.jsx("button",{disabled:!0,style:{padding:"10px 20px",backgroundColor:p.image,borderRadius:"20px",border:`1px solid ${p.border}`,minWidth:"80px",height:"38px",animation:"pulse 1.5s infinite ease-in-out",cursor:"default"}},`skeleton-choice-${I}`)):((Xe=t.task)==null?void 0:Xe.choices)&&t.task.choices.map(v=>{let I=v.value;t.type==="true-false"?(v.value==="True"&&(I="Yes"),v.value==="False"&&(I="No")):I=l(I);const xe={padding:"10px 20px",backgroundColor:te?`${d.secondaryLight}80`:d.secondaryV,color:te?`${d.text}80`:d.text,borderRadius:"20px",border:`1px solid ${d.border}`,transition:"all 0.2s ease",fontSize:"16px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.14)",minWidth:"80px",height:"38px",opacity:te?.7:1,userSelect:"none"};return n.jsx("button",{onClick:()=>rt(t.id,v.key,t.track_id),disabled:te,style:xe,onMouseOver:e=>{te||(e.currentTarget.style.backgroundColor=d.secondary,e.currentTarget.style.color="white",e.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.12)",e.currentTarget.style.transform="translateY(-1px)")},onMouseOut:e=>{te||Object.assign(e.currentTarget.style,{backgroundColor:xe.backgroundColor,color:xe.color,boxShadow:xe.boxShadow,transform:"translateY(0)"})},children:I},v.key)})]})]}),n.jsx("div",{children:!o&&n.jsxs("button",{onClick:tt,style:ae,onMouseOver:v=>{v.currentTarget.style.backgroundColor=d.containerBg,v.currentTarget.style.color="#000000",v.currentTarget.style.transform="translateY(-2px)",v.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.08)"},onMouseOut:v=>{v.currentTarget.style.backgroundColor=d.secondaryLight,v.currentTarget.style.color=d.secondary,v.currentTarget.style.transform="translateY(0)",v.currentTarget.style.boxShadow="none"},children:["Skip",n.jsx(Tt,{})]})})]})]},o?"skeleton":t.id)};return n.jsxs("div",{className:"reward-sdk-container",style:{...fe,padding:"0px 20px 0px 20px",position:"relative"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"15px 16px 5px 20px ",gap:"10px"},children:[n.jsx("button",{onClick:Ve,title:"Preferences",style:{width:"32px",height:"32px",background:"transparent",border:"none",cursor:"pointer",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:d.secondary,transition:"all 0.2s ease",backgroundColor:"#e0e0e0",userSelect:"none",fontSize:"16px"},onMouseOver:t=>{t.currentTarget.style.color="#000000",t.currentTarget.style.backgroundColor="#d4d4d4",t.currentTarget.style.boxShadow="0 2px 5px rgba(0,0,0,0.2)"},onMouseOut:t=>{t.currentTarget.style.color=d.secondary,t.currentTarget.style.backgroundColor="#e0e0e0",t.currentTarget.style.boxShadow="none"},children:n.jsx(kt,{})}),Y&&n.jsx("button",{onClick:()=>{window.confirm("Won't get a reward")&&Y()},style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#e0e0e0",color:d.secondary,border:"none",fontSize:"16px",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",padding:"0",boxShadow:"none",transition:"all 0.2s ease",userSelect:"none"},onMouseOver:t=>{t.currentTarget.style.color="#000000",t.currentTarget.style.backgroundColor="#d4d4d4",t.currentTarget.style.boxShadow="0 2px 5px rgba(0,0,0,0.2)"},onMouseOut:t=>{t.currentTarget.style.color=d.secondary,t.currentTarget.style.backgroundColor="#e0e0e0",t.currentTarget.style.boxShadow="none"},"aria-label":"Close",children:n.jsx(jt,{})})]}),n.jsx(Ct,{showPreferences:V,skipPreferences:ke,topicsDict:G,colors:d,formatTopicName:He,prefSubmitStatus:$e,updateProfile:Ne}),!V&&n.jsx(n.Fragment,{children:q&&!C?n.jsx("div",{children:Je(null,!0)}):Z?n.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",backgroundColor:d.errorLight,borderRadius:"12px",color:d.error,border:`1px solid ${d.error}25`},children:[n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Connection Error"}),n.jsx("div",{children:Z}),n.jsx("button",{onClick:D,style:{marginTop:"20px",padding:"10px 20px",backgroundColor:d.error,color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"500",userSelect:"none"},children:"Retry Connection"})]}):n.jsx("div",{children:Array.isArray(j)?n.jsx(n.Fragment,{children:j.map(t=>Je(t,!1))}):null})})]})};typeof window<"u"&&(window.RewardSdk||(window.RewardSdk=ut));exports.RewardSdk=ut;exports.default=ut;
